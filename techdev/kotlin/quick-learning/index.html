<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Kotlin 简要语法快速学习 - LittleYe233&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="LittleYe233&#039;s Blog"><meta name="msapplication-TileImage" content="https://pd.zwc365.com/seturl/https://github.com/LittleYe233.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="LittleYe233&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="前言因为一些机缘巧合, 笔者需要研究一下 Android 应用程序的二次开发, 作为目标的软件恰好是使用 Kotlin 编写的, 而笔者尚无该编程语言的基础, 因此需要快速掌握 Kotlin 的一些重要语法."><meta property="og:type" content="article"><meta property="og:title" content="Kotlin 简要语法快速学习"><meta property="og:url" content="https://blog.tamako.work/techdev/kotlin/quick-learning/"><meta property="og:site_name" content="LittleYe233&#039;s Blog"><meta property="og:description" content="前言因为一些机缘巧合, 笔者需要研究一下 Android 应用程序的二次开发, 作为目标的软件恰好是使用 Kotlin 编写的, 而笔者尚无该编程语言的基础, 因此需要快速掌握 Kotlin 的一些重要语法."><meta property="og:locale" content="en_US"><meta property="og:image" content="https://blog.tamako.work/img/og_image.png"><meta property="article:published_time" content="2022-12-07T12:03:58.000Z"><meta property="article:modified_time" content="2022-12-07T12:03:58.000Z"><meta property="article:author" content="LittleYe233"><meta property="article:tag" content="Kotlin"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://blog.tamako.work/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.tamako.work/techdev/kotlin/quick-learning/"},"headline":"LittleYe233's Blog","image":["https://blog.tamako.work/img/og_image.png"],"datePublished":"2022-12-07T12:03:58.000Z","dateModified":"2022-12-07T12:03:58.000Z","author":{"@type":"Person","name":"LittleYe233"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject"}},"description":"前言因为一些机缘巧合, 笔者需要研究一下 Android 应用程序的二次开发, 作为目标的软件恰好是使用 Kotlin 编写的, 而笔者尚无该编程语言的基础, 因此需要快速掌握 Kotlin 的一些重要语法."}</script><link rel="canonical" href="https://blog.tamako.work/techdev/kotlin/quick-learning/"><link rel="icon" href="https://pd.zwc365.com/seturl/https://github.com/LittleYe233.png"><meta name="referrer" content="no-referrer-when-downgrade"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.15.2/css/all.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js" integrity="sha384-VQ8d8WVFw0yHhCk5E8I86oOhv48xLpnDZx5T9GogA/Y84DcCKWXDmSDfn13bzFZY" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.loli.net/ajax/libs/pace/1.2.4/pace.min.js"></script><meta name="follow.it-verification-code" content="rabWfGgzpLXy2LNx46TH"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="LittleYe233's Blog" type="application/atom+xml">
</head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://s4.ax1x.com/2022/01/22/7hwc6A.png" alt="LittleYe233&#039;s Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a><a class="navbar-item" href="/self-talking">Self-talking</a><a class="navbar-item" href="/music">Music</a><a class="navbar-item" href="/media">Media</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/LittleYe233/hexo-theme-amazingremake"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><i class="far fa-calendar-plus"> </i>2022-12-07  <a class="commentCountImg" href="/techdev/kotlin/quick-learning/#comment-container"><span class="display-none-class">/techdev/kotlin/quick-learning/</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="1a73df78cb73effd4ebc885cfcda68c7">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>19 m  <i class="fas fa-pencil-alt"> </i>2.9 k</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><h1 class="title is-3 is-size-4-mobile">Kotlin 简要语法快速学习</h1><div class="content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>因为一些机缘巧合, 笔者需要研究一下 Android 应用程序的二次开发, 作为目标的软件恰好是使用 Kotlin 编写的, 而笔者尚无该编程语言的基础, 因此需要快速掌握 Kotlin 的一些重要语法.</p>
<span id="more"></span>

<p>笔者对 Kotlin 语法糖多早有所耳闻. 考虑到官方文档 (或者说, 笔者本次参考的资料) 未必对所有的语法特性都能面面俱到, 笔者在这篇文章中, 可能只会涉及到部分语法糖.</p>
<p>需要注意的是, 本文只会聚焦于 Kotlin 的<strong>语法规则</strong>, 并辅以一些具体例子, 并不会在这里谈 Kotlin 是如何<strong>编译</strong>源代码的, Kotlin 是如何应用到 <strong>Android 开发</strong>的, 诸如此类.</p>
<p>借用 Arch Linux 软件仓库 <a target="_blank" rel="noopener" href="https://archlinux.org/packages/community/any/kotlin/">community/kotlin</a> 包的描述: Statically typed programming language that can interoperate with Java. 可以预料的是, Kotlin 和 Java 的语法规则有一定相似之处, 但笔者同样没有 Java 基础, 因此对这两门语言都比较陌生的读者也不用担心笔者跳过二者相似的部分不谈.</p>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><h3 id="参考教程"><a href="#参考教程" class="headerlink" title="参考教程"></a>参考教程</h3><p>笔者主要参考的教程即为 Kotlin 的<a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/home.html">官方文档</a>, 并从 <a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/basic-syntax.html">Basic syntax</a> 章节开始.</p>
<p>同时, Kotlin 为已有变成基础的学习者提供了 <a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/learning-materials-overview.html">Learning materials overview</a> 的页面, 其中的第一章节同样是 Basic syntax.</p>
<h3 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h3><p>Kotlin <a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/getting-started.html#install-kotlin">官方文档</a>中建议使用 <a target="_blank" rel="noopener" href="https://www.jetbrains.com/idea/download/">IntelliJ IDEA</a> 和 <a target="_blank" rel="noopener" href="https://developer.android.com/studio">Android Studio</a> 来进行 Kotlin 开发, 但对于语法学习则不必要使用这些 IDE (更何况后者从名字上就像是针对 Android 开发的). 本次学习过程中, 笔者选择在 Arch Linux 中直接安装 community/kotlin 的包 (版本号为 1.7.22) 作为编译环境, <a target="_blank" rel="noopener" href="https://archlinux.org/packages/extra/x86_64/jdk17-openjdk/">extra/jdk17-openjdk</a> 包 (版本号为 17.0.5.u1) 作为生成的 JAR 包的运行环境. 读者可以搭配装载 Kotlin 相关<a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=fwcd.kotlin">插件</a>的 <a target="_blank" rel="noopener" href="https://code.visualstudio.com/">Visual Studio Code</a> 用以编辑 Kotlin 源代码.</p>
<h2 id="编译运行"><a href="#编译运行" class="headerlink" title="编译运行"></a>编译运行</h2><p>这里笔者略去 JVM 等细节, 仅说明命令行环境下如何编译单文件 Kotlin 源代码.</p>
<p>假设需要编译的源代码文件路径为 <code>/path/to/kotlin-learning/helloworld.kt</code>. 保证 Java 运行时环境和 Kotlin 编译器安装的情况下, 执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /path/to/kotlin-learning</span><br><span class="line">kotlinc helloworld.kt -include-runtime -d helloworld.jar</span><br><span class="line">java -jar helloworld.jar</span><br></pre></td></tr></table></figure>

<h2 id="包的声明与导入"><a href="#包的声明与导入" class="headerlink" title="包的声明与导入"></a>包的声明与导入</h2><p>熟悉 Java 语法的读者应该很习惯诸如</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.myapp;</span><br></pre></td></tr></table></figure>

<p>的代码. 在 Kotlin 中一般仍然需要编写类似的结构, 这是因为 Kotlin 同样依赖”包” (package) 的结构来组织代码. 显而易见的是点分隔符 <code>.</code> 规定了包之间的层级关系. 暂时可以简单理解为这声明了代码文件的”ID”. 不过需要注意的是, Kotlin 中的包声明不必要与实际的文件系统结构一致, 也就是说, 声明了 <code>com.example.myapp</code> 的代码文件的路径不必要是 <code>com/example/myapp.kt</code>.</p>
<p>声明包名之后, 就可以通过 <code>import</code> 语句导入其他包, 乃至其他 (诸如顶级函数和属性, 枚举类型常数等):</p>
<figure class="highlight kotlin"><figcaption><span>package_example.kt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ktlearning,package_example</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入包 `OneFile`</span></span><br><span class="line"><span class="keyword">import</span> ktlearning.one_package.OneFile</span><br><span class="line"><span class="comment">// 导入包 `another_package` 下的所有子包</span></span><br><span class="line"><span class="keyword">import</span> ktlearning.another_package.*</span><br><span class="line"><span class="comment">// 避免包名冲突</span></span><br><span class="line"><span class="keyword">import</span> ktlearning.another_another_package.OneFile <span class="keyword">as</span> AnotherFile</span><br><span class="line"><span class="comment">// 导入顶级函数 `TopLevelFunc`</span></span><br><span class="line"><span class="keyword">import</span> ktlearning.another_another_package.AnotherFile.TopLevelFunc</span><br></pre></td></tr></table></figure>

<h2 id="主函数"><a href="#主函数" class="headerlink" title="主函数"></a>主函数</h2><p>Kotlin 需要主函数作为程序的入口. 主函数通常写作:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">(args: <span class="type">Array</span>&lt;<span class="type">String</span>&gt;)</span></span> &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这类似于 Java 中的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    <span class="comment">// 函数体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从 Kotlin 的代码中, 可以看出这个主函数 <code>main(args)</code> 接受一个 <code>String</code> 类型的数组 (<code>Array</code>). 当然在当前版本的 Kotlin 中, 主函数可以省去 <code>args</code> 这一参数. 函数体中未使用该参数反而会触发警告.</p>
<p>对于这个参数, 一个常见的操作是直接将其转化为字符串并输出:</p>
<figure class="highlight kotlin"><figcaption><span>example.kt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">println(args.contentToString())</span><br></pre></td></tr></table></figure>

<p>例如 <code>java -jar example.jar foo 1024 &quot;bar baz&quot;</code> 的输出将为</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[foo, 1024, bar baz]</span><br></pre></td></tr></table></figure>

<p>有趣的是, 若将 <code>.contentToString()</code> 删去, Kotlin 依然可以编译, 但最终可能会输出诸如</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Ljava.lang.String;@4f47d241</span><br></pre></td></tr></table></figure>

<p>的错误结果.</p>
<h2 id="输出到标准输出-standard-output"><a href="#输出到标准输出-standard-output" class="headerlink" title="输出到标准输出 (standard output)"></a>输出到标准输出 (standard output)</h2><figure class="highlight kotlin"><figcaption><span>helloworld.kt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ktlearning.helloworld</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    println(<span class="string">&quot;Hello world!&quot;</span>)</span><br><span class="line">    print(<span class="number">1</span>)</span><br><span class="line">    print(<span class="string">&quot; more &quot;</span>)</span><br><span class="line">    print(<span class="string">&quot;hello world!\n&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hello world!</span><br><span class="line">1 more hello world!</span><br></pre></td></tr></table></figure>

<p>Kotlin 支持 <code>print(message)</code> 和 <code>println(message)</code> 两种输出到标准输出的方式. 需要注意的是这两个函数只接受<strong>单一</strong>变量参数.</p>
<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><p>“属性” (property) 这个概念被归类于 Classes and objects 这一章节中. 这个术语可能更常在面向对象编程中提及. 当然, 本文之前涉及到的完整的可编译代码似乎并没有显式地涉及到面向对象 (例如, 没有出现 <code>class</code> 这一关键字), 不过 Kotlin 中依然将诸如其他编程语言中很早提及的 “不可变变量” (immutable variable) 和 “可变变量” (mutable variable) 都视为一种 “属性” - 这表明它们可以具有传统的 “变量” 所缺失的特性.</p>
<p>Kotlin 中同样有 “编译时常量” (compile-time constant) 的概念. 根据<a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/properties.html#compile-time-constants">官方文档</a>相关的表述, 这类属性若在编译时值已知, Kotlin 编译器则可以在编译期间将对其的引用替换为实际的值.</p>
<p>试图定义传统意义上的 “变量” 和 “常量” 时:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义不可变变量</span></span><br><span class="line"><span class="keyword">val</span> a: <span class="built_in">Int</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">// 定义可变变量</span></span><br><span class="line"><span class="keyword">var</span> b = <span class="string">&quot;foo&quot;</span></span><br><span class="line"><span class="comment">// 定义编译时常量</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">val</span> PI = <span class="number">3.14159</span></span><br></pre></td></tr></table></figure>

<h3 id="getters-和-setters"><a href="#getters-和-setters" class="headerlink" title="getters 和 setters"></a>getters 和 setters</h3><p>如果可以提前涉及到一些面向对象的内容的话, 既然这些概念都可以被抽象为 “属性”, 那面向对象中 getter 和 setter 的存在就不可被略过了. Kotlin 中对可变属性的完整定义语法如下:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> &lt;propertyName&gt;[: &lt;PropertyType&gt;] [= &lt;property_initializer&gt;]</span><br><span class="line">    [&lt;getter&gt;]</span><br><span class="line">    [&lt;setter&gt;]</span><br></pre></td></tr></table></figure>

<p>不可变属性的则如下:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> &lt;propertyName&gt;[: &lt;PropertyType&gt;] [= &lt;property_initializer&gt;]</span><br><span class="line">    [&lt;getter&gt;]</span><br><span class="line">    <span class="comment">// 不允许定义 setter</span></span><br></pre></td></tr></table></figure>

<p>一些简单的定义示例如下:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自动推断为 `Int` 类型, 具有默认的 getter 和 setter</span></span><br><span class="line"><span class="keyword">var</span> initialized = <span class="number">1</span></span><br><span class="line"><span class="comment">// 为 `Int` 类型不可变属性设置自定义 getter</span></span><br><span class="line"><span class="keyword">val</span> area: <span class="built_in">Int</span></span><br><span class="line">    <span class="keyword">get</span>() = <span class="keyword">this</span>.width * <span class="keyword">this</span>.height</span><br><span class="line"><span class="comment">// 同时根据 getter 自动推断</span></span><br><span class="line"><span class="keyword">val</span> area2 <span class="keyword">get</span>() = <span class="keyword">this</span>.width * <span class="keyword">this</span>.height</span><br></pre></td></tr></table></figure>

<h3 id="backing-fields"><a href="#backing-fields" class="headerlink" title="backing fields"></a>backing fields</h3><p>若涉及到在属性的 setter 中为属性本身赋值时, 为避免出现无限递归的情形, Kotlin 引入了一个 “内部属性” <code>field</code> 用以 “临时” 存储属性值:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> counter = <span class="number">0</span></span><br><span class="line">    <span class="keyword">set</span>(value) &#123;</span><br><span class="line">        <span class="keyword">if</span> (value &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            field = value</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>如果将上述代码块中的 <code>field = value</code> 改为 <code>counter = value</code>, 编译器则会抛出堆栈溢出的错误.</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>Kotlin 中任何事物皆是对象. 这里仅讨论一些基本的数据类型.</p>
<h3 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h3><table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">字节数</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>Byte</code></td>
<td align="center">1</td>
</tr>
<tr>
<td align="center"><code>Short</code></td>
<td align="center">2</td>
</tr>
<tr>
<td align="center"><code>Int</code></td>
<td align="center">4</td>
</tr>
<tr>
<td align="center"><code>Long</code></td>
<td align="center">8</td>
</tr>
</tbody></table>
<p>与一些编程语言相同, 在类型自动推断中, 可以在数字末尾添加 <code>L</code> (例如 <code>1L</code>) 来声明其类型为 <code>Long</code> 而不是默认的 <code>Int</code>.</p>
<p>参见 <a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/numbers.html#integer-types">Integer types</a>.</p>
<h3 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h3><table>
<thead>
<tr>
<th align="center">类型</th>
<th align="center">字节数</th>
<th align="center">significant bits</th>
<th align="center">exponent bits</th>
<th align="center">decimal digits</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>Float</code></td>
<td align="center">4</td>
<td align="center">24</td>
<td align="center">8</td>
<td align="center">6-7</td>
</tr>
<tr>
<td align="center"><code>Double</code></td>
<td align="center">8</td>
<td align="center">53</td>
<td align="center">11</td>
<td align="center">15-16</td>
</tr>
</tbody></table>
<p>同样, 在数字末尾添加 <code>f</code> 或 <code>F</code> (例如 <code>3.14f</code>) 来声明其类型为 <code>Float</code> 而不是默认的 <code>Double</code>.</p>
<p>需要注意的是, 浮点型和整型之间不会<strong>自动转换</strong>. 例如如下的代码会抛出编译错误:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum</span><span class="params">(a: <span class="type">Double</span>, b: <span class="type">Double</span>)</span></span> = a + b</span><br><span class="line"><span class="comment">// `1` 不是 `Double` 类型</span></span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2.0</span>)</span><br></pre></td></tr></table></figure>

<p>参见 <a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/numbers.html#floating-point-types">Floating-point types</a>.</p>
<h3 id="无符号整型"><a href="#无符号整型" class="headerlink" title="无符号整型"></a>无符号整型</h3><p>只需要在原有的数据类型前添加 <code>U</code> (例如 <code>UByte</code>) 即可.</p>
<p>同样, 在数字末尾添加 <code>u</code> (例如 <code>1u</code>) 来声明其类型为无符号类型. 类似的, <code>ul</code> 或 <code>UL</code> 声明其类型为 <code>ULong</code>.</p>
<h3 id="特殊的数字表示"><a href="#特殊的数字表示" class="headerlink" title="特殊的数字表示"></a>特殊的数字表示</h3><p>除了上文提及的 <code>f</code> / <code>F</code> 和 <code>L</code>, Kotlin 还支持其他特别的数字表示方法:</p>
<table>
<thead>
<tr>
<th align="center">特殊表示</th>
<th align="center">示例</th>
</tr>
</thead>
<tbody><tr>
<td align="center">二进制整型</td>
<td align="center"><code>0b00001111</code></td>
</tr>
<tr>
<td align="center">八进制整型</td>
<td align="center"><strong>不支持</strong></td>
</tr>
<tr>
<td align="center">十六进制整型</td>
<td align="center"><code>0x0F</code></td>
</tr>
<tr>
<td align="center">科学计数法</td>
<td align="center"><code>1.0e24</code></td>
</tr>
</tbody></table>
<p>同时, Kotlin 支持在数字之间增加下划线 (<code>_</code>) 来增加可读性:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> oneMillion = <span class="number">1_000_000</span></span><br><span class="line"><span class="keyword">val</span> creditCardNumber = <span class="number">1234_5678_9012_3456L</span></span><br><span class="line"><span class="keyword">val</span> socialSecurityNumber = <span class="number">999_99_9999L</span></span><br><span class="line"><span class="keyword">val</span> hexBytes = <span class="number">0xFF_EC_DE_5E</span></span><br><span class="line"><span class="keyword">val</span> bytes = <span class="number">0b11010010_01101001_10010100_10010010</span></span><br></pre></td></tr></table></figure>

<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>上文中已经出现了主函数的定义和使用方法. 对于一个通常的函数, 例如实现两个整数的加法:</p>
<figure class="highlight kotlin"><figcaption><span>func_sum.kt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ktlearning.func_sum</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通常的函数定义</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum1</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>: <span class="built_in">Int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接定义其返回值的函数定义, 同时实现了类型推断</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">sum2</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> = a + b</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义无返回值的函数 (`Unit` 可以省略)</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printSum</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span>: <span class="built_in">Unit</span> &#123;</span><br><span class="line">    println(<span class="string">&quot;Sum of <span class="variable">$a</span> and <span class="variable">$b</span> is <span class="subst">$&#123;a + b&#125;</span>&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> a = <span class="number">2</span></span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">3</span></span><br><span class="line"></span><br><span class="line">    println(<span class="string">&quot;Sum of <span class="variable">$a</span> and <span class="variable">$b</span> is <span class="subst">$&#123;sum1(a, b)&#125;</span>&quot;</span>)</span><br><span class="line">    println(<span class="string">&quot;Sum of <span class="variable">$a</span> and <span class="variable">$b</span> is <span class="subst">$&#123;sum2(a, b)&#125;</span>&quot;</span>)</span><br><span class="line">    printSum(a, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><p>直接用例子说明:</p>
<figure class="highlight kotlin"><figcaption><span>oop_shape.kt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ktlearning.oop_shape</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可继承的类前加 `open`</span></span><br><span class="line"><span class="keyword">open</span> <span class="keyword">class</span> <span class="title class_">Shape</span>(name: String) &#123;</span><br><span class="line">    <span class="comment">// the primary constructor</span></span><br><span class="line">    <span class="keyword">var</span> name = name</span><br><span class="line"></span><br><span class="line">    <span class="keyword">open</span> <span class="function"><span class="keyword">fun</span> <span class="title">say</span><span class="params">()</span></span> &#123;</span><br><span class="line">        println(<span class="string">&quot;My name is <span class="subst">$&#123;this.name&#125;</span>!&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">open</span> <span class="keyword">val</span> area: <span class="built_in">Double</span> = <span class="number">0.0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Rectangle</span>(name: String, width: <span class="built_in">Double</span>, height: <span class="built_in">Double</span>) : Shape(name) &#123;</span><br><span class="line">    <span class="keyword">var</span> width = width</span><br><span class="line">    <span class="keyword">var</span> height = height</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 重载父类的属性</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> area: <span class="built_in">Double</span></span><br><span class="line">        <span class="keyword">get</span>() = <span class="keyword">this</span>.width * <span class="keyword">this</span>.height</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Circle</span>(name: String, radius: <span class="built_in">Double</span>) : Shape(name) &#123;</span><br><span class="line">    <span class="keyword">val</span> PI = <span class="number">3.1415926</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> radius = radius</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">val</span> area: <span class="built_in">Double</span></span><br><span class="line">        <span class="keyword">get</span>() = PI * <span class="keyword">this</span>.radius * <span class="keyword">this</span>.radius</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> rect = Rectangle(<span class="string">&quot;My Rectangle&quot;</span>, <span class="number">2.0</span>, <span class="number">3.5</span>)</span><br><span class="line">    <span class="keyword">val</span> circ = Circle(<span class="string">&quot;My Circle&quot;</span>, <span class="number">2.0</span>)</span><br><span class="line"></span><br><span class="line">    rect.say()</span><br><span class="line">    circ.say()</span><br><span class="line"></span><br><span class="line">    println(<span class="string">&quot;The area of <span class="subst">$&#123;rect.name&#125;</span> is <span class="subst">$&#123;rect.area&#125;</span>&quot;</span>)</span><br><span class="line">    println(<span class="string">&quot;The area of <span class="subst">$&#123;circ.name&#125;</span> is <span class="subst">$&#123;circ.area&#125;</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出为:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">My name is My Rectangle!</span><br><span class="line">My name is My Circle!</span><br><span class="line">The area of My Rectangle is 7.0</span><br><span class="line">The area of My Circle is 12.5663704</span><br></pre></td></tr></table></figure>

<p>参见 <a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/basic-syntax.html#creating-classes-and-instances">Creating classes and instances</a>.</p>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 行注释</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    块注释</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    下面是内层块注释.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    <span class="comment">/* 内层块注释 */</span></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    上面是内层块注释</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h2 id="条件结构"><a href="#条件结构" class="headerlink" title="条件结构"></a>条件结构</h2><h3 id="if-语句块"><a href="#if-语句块" class="headerlink" title="if 语句块"></a><code>if</code> 语句块</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (a &gt; b)</span><br><span class="line">    println(a)</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">    println(b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="条件表达式"><a href="#条件表达式" class="headerlink" title="条件表达式"></a>条件表达式</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">max</span><span class="params">(a: <span class="type">Int</span>, b: <span class="type">Int</span>)</span></span> = <span class="keyword">if</span> (a &gt; b) a <span class="keyword">else</span> b</span><br></pre></td></tr></table></figure>

<p>相对的, C 中为</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">max</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (a &gt; b) ? a : b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Python 中为</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">max</span>(<span class="params">a: <span class="built_in">int</span>, b: <span class="built_in">int</span></span>) -&gt; <span class="built_in">int</span>:</span><br><span class="line">    <span class="keyword">return</span> a <span class="keyword">if</span> a &gt; b <span class="keyword">else</span> b</span><br></pre></td></tr></table></figure>

<p><del>(个人认为 Python 的条件表达式的结构经常写错, 因为条件被插入在两个分支表达式之间.)</del></p>
<h3 id="when"><a href="#when" class="headerlink" title="when"></a><code>when</code></h3><p>Kotlin 中的 <code>when</code> 类似于 C 中的 <code>switch</code>, 但其用法更加灵活:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">when</span> (x) &#123;</span><br><span class="line">    <span class="comment">// 左侧可以是一个表达式, 用以匹配</span></span><br><span class="line">    <span class="number">1</span> -&gt; println(<span class="string">&quot;x == 1&quot;</span>)</span><br><span class="line">    <span class="number">2</span> -&gt; println(<span class="string">&quot;x == 2&quot;</span>)</span><br><span class="line">    <span class="comment">// 不匹配上述所有表达式</span></span><br><span class="line">    <span class="keyword">else</span> -&gt; &#123;</span><br><span class="line">        println(<span class="string">&quot;x is neither 1 nor 2&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// `when` 也可以作为表达式</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">describe</span><span class="params">(obj: <span class="type">Any</span>)</span></span>: String =</span><br><span class="line">    <span class="keyword">when</span> (obj) &#123;</span><br><span class="line">        <span class="number">1</span>          -&gt; <span class="string">&quot;One&quot;</span></span><br><span class="line">        <span class="string">&quot;Hello&quot;</span>    -&gt; <span class="string">&quot;Greeting&quot;</span></span><br><span class="line">        <span class="comment">// 可以包含条件表达式</span></span><br><span class="line">        <span class="keyword">is</span> <span class="built_in">Long</span>    -&gt; <span class="string">&quot;Long&quot;</span></span><br><span class="line">        !<span class="keyword">is</span> String -&gt; <span class="string">&quot;Not a string&quot;</span></span><br><span class="line">        <span class="keyword">else</span>       -&gt; <span class="string">&quot;Unknown&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">isPositive</span><span class="params">(x: <span class="type">Int</span>)</span></span> = <span class="keyword">when</span> (x) &#123;</span><br><span class="line">    <span class="comment">// 当覆盖所有可能性时, 无需 `else` 分支</span></span><br><span class="line">    x &gt; <span class="number">0</span> -&gt; <span class="literal">true</span></span><br><span class="line">    x &lt;= <span class="number">0</span> -&gt; <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h2><h3 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a><code>for</code> 循环</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.3</span>) &#123;</span><br><span class="line">    println(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">6</span> downTo <span class="number">0</span> step <span class="number">2</span>) &#123;</span><br><span class="line">    println(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (elem <span class="keyword">in</span> array) &#123;</span><br><span class="line">    println(elem)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> array.indices) &#123;</span><br><span class="line">    println(array[i])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ((i, elem) <span class="keyword">in</span> array.withIndex()) &#123;</span><br><span class="line">    println(<span class="string">&quot;array[<span class="variable">$i</span>] = <span class="variable">$elem</span>&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="while-循环"><a href="#while-循环" class="headerlink" title="while 循环"></a><code>while</code> 循环</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (x &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    x--</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line">    <span class="keyword">val</span> y = retrieveData()</span><br><span class="line">&#125; <span class="keyword">while</span> (y != <span class="literal">null</span>)</span><br></pre></td></tr></table></figure>

<h2 id="可空值-nullable-values-和空值检查-null-checks"><a href="#可空值-nullable-values-和空值检查-null-checks" class="headerlink" title="可空值 (nullable values) 和空值检查 (null checks)"></a>可空值 (nullable values) 和空值检查 (null checks)</h2><p>可空类型需要在类型后添加 <code>?</code> 标识. <code>null</code> 则表示空值.</p>
<figure class="highlight kotlin"><figcaption><span>null_check.kt</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 若字符串不能表示一个整型, 则转化为 `null`</span></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">parseInt</span><span class="params">(str: <span class="type">String</span>)</span></span>: <span class="built_in">Int</span>? &#123;</span><br><span class="line">    <span class="keyword">return</span> str.toIntOrNull()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">printProduct</span><span class="params">(arg1: <span class="type">String</span>, arg2: <span class="type">String</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">val</span> x = parseInt(arg1)</span><br><span class="line">    <span class="keyword">val</span> y = parseInt(arg2)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 不能直接使用 `x * y`, 因为 `x` 和 `y` 可能为 `null`</span></span><br><span class="line">    <span class="keyword">if</span> (x != <span class="literal">null</span> &amp;&amp; y != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// 空值检查后, 其类型自动转化为非空的整型</span></span><br><span class="line">        println(x * y)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        println(<span class="string">&quot;&#x27;<span class="variable">$arg1</span>&#x27; or &#x27;<span class="variable">$arg2</span>&#x27; is not a number&quot;</span>)</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    printProduct(<span class="string">&quot;6&quot;</span>, <span class="string">&quot;7&quot;</span>)</span><br><span class="line">    printProduct(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;7&quot;</span>)</span><br><span class="line">    printProduct(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出为:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">42</span><br><span class="line">&#x27;a&#x27; or &#x27;7&#x27; is not a number</span><br><span class="line">&#x27;a&#x27; or &#x27;b&#x27; is not a number</span><br></pre></td></tr></table></figure>
</div><div class="article-licensing box"><div class="licensing-title"><p>Kotlin 简要语法快速学习</p><p><a href="https://blog.tamako.work/techdev/kotlin/quick-learning/">https://blog.tamako.work/techdev/kotlin/quick-learning/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><a href="https://blog.tamako.work"><p>LittleYe233</p></a></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2022-12-07</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2022-12-07</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="icon" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a><a class="icon" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="recommend-area"><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># Related Posts</span><br><span>  1.<a class="is-size-6" href="/techdev/arch/tiddlywiki/" target="_blank" rel="noreferrer">Arch Linux 安装 TiddlyWiki + 配置服务 + 添加自定义插件 + Cloudflare 代理 + Caddy 反向代理</a><br></span><span>  2.<a class="is-size-6" href="/techdev/arch/um5302ta/" target="_blank" rel="noreferrer">Arch Linux 在 ASUS Zenbook S 13 OLED (UM5302TA) 上的 patch</a><br></span><span>  3.<a class="is-size-6" href="/techdev/gpg-encryption-decryption-validation/" target="_blank" rel="noreferrer">使用 GPG 加密、解密和验证信息</a><br></span><span>  4.<a class="is-size-6" href="/techdev/arch/wine-galgame/" target="_blank" rel="noreferrer">【Arch Linux】使用 Wine 运行 Galgame</a><br></span><span>  5.<a class="is-size-6" href="/techdev/arch/kernel-compilation/" target="_blank" rel="noreferrer">【Arch Linux】编译安装 AUR 上的 Linux 内核</a><br></span><span>  6.<a class="is-size-6" href="/techdev/arch/localization-simplified-chinese/" target="_blank" rel="noreferrer">【Arch Linux】本地化：简体中文</a><br></span><span>  7.<a class="is-size-6" href="/techdev/arch/installation/" target="_blank" rel="noreferrer">Arch Linux 物理机安装大体思路和部分实现细节（MBR &amp; GPT）</a><br></span></div><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># Recommend Posts</span><br><span>  1.<a class="is-size-6" href="/acg/ima-aruki-dasu-kimi-e/" target="_blank" rel="noreferrer">【ACG音乐分享】Ceui《今、歩き出す君へ》</a><br></span><span>  2.<a class="is-size-6" href="/techdev/gpg-encryption-decryption-validation/" target="_blank" rel="noreferrer">使用 GPG 加密、解密和验证信息</a><br></span><span>  3.<a class="is-size-6" href="/techdev/how-to-write-a-git-commit-message-chs/" target="_blank" rel="noreferrer">【翻译】如何编写 Git 提交消息</a><br></span><span>  4.<a class="is-size-6" href="/techdev/linux-time-operations-and-sync/" target="_blank" rel="noreferrer">Linux 时间操作及其同步</a><br></span><span>  5.<a class="is-size-6" href="/techdev/python-cpp-string-find-perf-test/" target="_blank" rel="noreferrer">【实测】Python 和 C++ 下字符串查找的速度对比</a><br></span><span>  6.<a class="is-size-6" href="/acmoi/codeforces/1312b/" target="_blank" rel="noreferrer">Codeforces 1312B: Bogosort</a><br></span></div></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=61f7585fd7b259001917a045&amp;product=inline-share-buttons" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/techdev/gpg-encryption-decryption-validation/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">使用 GPG 加密、解密和验证信息</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/techdev/arch/wine-galgame/"><span class="level-item">【Arch Linux】使用 Wine 运行 Galgame</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><div class="title is-5">Comments</div><div class="content twikoo" id="twikoo"></div><script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.8/dist/twikoo.all.min.js"></script><script>twikoo.init({
      envId: 'https://comment.blog.tamako.work',
      lang: 'zh-CN',
      el: '#twikoo'
    });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="is-flex is-mobile" href="#前言"><span>前言</span></a></li><li><a class="is-flex is-mobile" href="#准备"><span>准备</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#参考教程"><span>参考教程</span></a></li><li><a class="is-flex is-mobile" href="#开发环境"><span>开发环境</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#编译运行"><span>编译运行</span></a></li><li><a class="is-flex is-mobile" href="#包的声明与导入"><span>包的声明与导入</span></a></li><li><a class="is-flex is-mobile" href="#主函数"><span>主函数</span></a></li><li><a class="is-flex is-mobile" href="#输出到标准输出-standard-output"><span>输出到标准输出 (standard output)</span></a></li><li><a class="is-flex is-mobile" href="#属性"><span>属性</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#getters-和-setters"><span>getters 和 setters</span></a></li><li><a class="is-flex is-mobile" href="#backing-fields"><span>backing fields</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#数据类型"><span>数据类型</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#整型"><span>整型</span></a></li><li><a class="is-flex is-mobile" href="#浮点型"><span>浮点型</span></a></li><li><a class="is-flex is-mobile" href="#无符号整型"><span>无符号整型</span></a></li><li><a class="is-flex is-mobile" href="#特殊的数字表示"><span>特殊的数字表示</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#函数"><span>函数</span></a></li><li><a class="is-flex is-mobile" href="#面向对象"><span>面向对象</span></a></li><li><a class="is-flex is-mobile" href="#注释"><span>注释</span></a></li><li><a class="is-flex is-mobile" href="#条件结构"><span>条件结构</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#if-语句块"><span>if 语句块</span></a></li><li><a class="is-flex is-mobile" href="#条件表达式"><span>条件表达式</span></a></li><li><a class="is-flex is-mobile" href="#when"><span>when</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#循环结构"><span>循环结构</span></a><ul class="menu-list"><li><a class="is-flex is-mobile" href="#for-循环"><span>for 循环</span></a></li><li><a class="is-flex is-mobile" href="#while-循环"><span>while 循环</span></a></li></ul></li><li><a class="is-flex is-mobile" href="#可空值-nullable-values-和空值检查-null-checks"><span>可空值 (nullable values) 和空值检查 (null checks)</span></a></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="column-right-shadow is-hidden-widescreen"></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://s4.ax1x.com/2022/01/22/7hwc6A.png" alt="LittleYe233&#039;s Blog" height="28"></a><p class="size-small"><span>&copy; 2023 LittleYe233</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noreferrer">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noreferrer">Icarus</a> &amp; <a href="https://github.com/LittleYe233/hexo-theme-amazingremake" target="_blank" rel="noreferrer">Amazing-Remake</a> <br><span>© <a href="https://icp.gov.moe/?keyword=20227890" target="_blank" rel="noreferrer">萌ICP备20227890号</a><br></span><span>License: <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a> unless the license is specified in articles<br></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️Site from <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> has existed <strong>" + dnum + "</strong> d <strong>" + hnum + "</strong> h <strong>" + mnum + "</strong> m <strong>" + snum + "</strong> s!❤️";
        }var now = new Date();setInterval("createTime('Sun Jan 23 2022 04:54:43 GMT+0800 (China Standard Time)')", 250,"");</script><br></span><div class="size-small"><span>❤️Thx <strong><span id="busuanzi_value_site_uv">99+</span></strong> users <strong><span id="busuanzi_value_site_pv">99+</span></strong> visited!❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/LittleYe233/hexo-theme-amazingremake"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    enabled: true,
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script type="text/x-mathjax-config">MathJax.Hub.Config({
            'HTML-CSS': {
                matchFontHeight: false
            },
            SVG: {
                matchFontHeight: false
            },
            CommonHTML: {
                matchFontHeight: false
            },
            tex2jax: {
                inlineMath: [
                    ['$','$'],
                    ['\\(','\\)']
                ]
            }
        });</script><script src="https://cdnjs.loli.net/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_CHTML" defer></script><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        function loadMathJax() { // 加载mathjax
            window.MathJax = {
                tex: {
                    inlineMath: [['$', '$']],
                    autoload: {
                        color: [],
                        colorv2: ['color']
                    },
                    packages: {'[+]': ['noerrors']}
                },
                options: {
                    ignoreHtmlClass: 'tex2jax_ignore',
                    processHtmlClass: 'tex2jax_process'
                },
                loader: {
                    load: ['input/asciimath', '[tex]/noerrors']
                }
            };
            $.getScript('//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js');
        };

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(false){
                $.getScript('/js/comment-issue-data.js',function(){loadIssueData('undefined','undefined','undefined','undefined',undefined);});
            }
            if('katex' === 'mathjax'){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script></body></html>